!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.computeLayout=b()}(this,function(){var a=function(){function a(b){if(b.layout&&!b.isDirty||(b.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),b.style||(b.style={}),b.children||(b.children=[]),b.style.measure&&b.children&&b.children.length)throw new Error("Using custom measure function is supported only for leaf nodes.");return b.children.forEach(a),b}function b(a){return void 0===a||Number.isNaN(a)}function c(a){return a===da||a===ea}function d(a){return a===fa||a===ga}function e(a){return void 0===a.style.flex?0:a.style.flex}function f(a){return!!Y||e(a)<=0}function g(a){return e(a)>0?e(a):0}function h(a){if(Y){if(0!==e(a))return 1}else if(e(a)<0)return 1;return 0}function i(a,b){if(void 0!==a.style.marginStart&&c(b))return a.style.marginStart;var d=null;switch(b){case"row":d=a.style.marginLeft;break;case"row-reverse":d=a.style.marginRight;break;case"column":d=a.style.marginTop;break;case"column-reverse":d=a.style.marginBottom}return void 0!==d?d:void 0!==a.style.margin?a.style.margin:0}function j(a,b){if(void 0!==a.style.marginEnd&&c(b))return a.style.marginEnd;var d=null;switch(b){case"row":d=a.style.marginRight;break;case"row-reverse":d=a.style.marginLeft;break;case"column":d=a.style.marginBottom;break;case"column-reverse":d=a.style.marginTop}return null!=d?d:void 0!==a.style.margin?a.style.margin:0}function k(a,b){if(void 0!==a.style.paddingStart&&a.style.paddingStart>=0&&c(b))return a.style.paddingStart;var d=null;switch(b){case"row":d=a.style.paddingLeft;break;case"row-reverse":d=a.style.paddingRight;break;case"column":d=a.style.paddingTop;break;case"column-reverse":d=a.style.paddingBottom}return null!=d&&d>=0?d:void 0!==a.style.padding&&a.style.padding>=0?a.style.padding:0}function l(a,b){if(void 0!==a.style.paddingEnd&&a.style.paddingEnd>=0&&c(b))return a.style.paddingEnd;var d=null;switch(b){case"row":d=a.style.paddingRight;break;case"row-reverse":d=a.style.paddingLeft;break;case"column":d=a.style.paddingBottom;break;case"column-reverse":d=a.style.paddingTop}return null!=d&&d>=0?d:void 0!==a.style.padding&&a.style.padding>=0?a.style.padding:0}function m(a,b){if(void 0!==a.style.borderStartWidth&&a.style.borderStartWidth>=0&&c(b))return a.style.borderStartWidth;var d=null;switch(b){case"row":d=a.style.borderLeftWidth;break;case"row-reverse":d=a.style.borderRightWidth;break;case"column":d=a.style.borderTopWidth;break;case"column-reverse":d=a.style.borderBottomWidth}return null!=d&&d>=0?d:void 0!==a.style.borderWidth&&a.style.borderWidth>=0?a.style.borderWidth:0}function n(a,b){if(void 0!==a.style.borderEndWidth&&a.style.borderEndWidth>=0&&c(b))return a.style.borderEndWidth;var d=null;switch(b){case"row":d=a.style.borderRightWidth;break;case"row-reverse":d=a.style.borderLeftWidth;break;case"column":d=a.style.borderBottomWidth;break;case"column-reverse":d=a.style.borderTopWidth}return null!=d&&d>=0?d:void 0!==a.style.borderWidth&&a.style.borderWidth>=0?a.style.borderWidth:0}function o(a,b){return k(a,b)+m(a,b)}function p(a,b){return l(a,b)+n(a,b)}function q(a,b){return i(a,b)+j(a,b)}function r(a,b){return o(a,b)+p(a,b)}function s(a){return a.style.justifyContent?a.style.justifyContent:"flex-start"}function t(a){return a.style.alignContent?a.style.alignContent:"flex-start"}function u(a,b){return b.style.alignSelf?b.style.alignSelf:a.style.alignItems?a.style.alignItems:"stretch"}function v(a,b){if(b===ca){if(a===da)return ea;if(a===ea)return da}return a}function w(a,b){var c;return c=a.style.direction?a.style.direction:aa,c===aa&&(c=void 0===b?ba:b),c}function x(a){return a.style.flexDirection?a.style.flexDirection:fa}function y(a,b){return d(a)?v(da,b):fa}function z(a){return a.style.position?a.style.position:qa}function A(a){return a.style.overflow?a.style.overflow:sa}function B(a){return z(a)===qa&&void 0!==a.style.flex&&0!==a.style.flex}function C(a){return"wrap"===a.style.flexWrap}function D(a,b){return a.layout[Ba[b]]+q(a,b)}function E(a,b){return void 0!==a.style[Aa[b]]&&a.style[Aa[b]]>=0}function F(a,b){return void 0!==a.layout[Ba[b]]&&a.layout[Ba[b]]>=0}function G(a,d){return c(d)&&!b(a.style[$])||!b(a.style[xa[d]])}function H(a,d){return c(d)&&!b(a.style[_])||!b(a.style[ya[d]])}function I(a){return void 0!==a.style.measure}function J(a,d){return!b(a.style[$])&&c(d)?a.style[$]:b(a.style[xa[d]])?0:a.style[xa[d]]}function K(a,d){return!b(a.style[_])&&c(d)?a.style[_]:b(a.style[ya[d]])?0:a.style[ya[d]]}function L(a,b,c){var d={row:a.style.minWidth,"row-reverse":a.style.minWidth,column:a.style.minHeight,"column-reverse":a.style.minHeight}[b],e={row:a.style.maxWidth,"row-reverse":a.style.maxWidth,column:a.style.maxHeight,"column-reverse":a.style.maxHeight}[b],f=c;return void 0!==e&&e>=0&&f>e&&(f=e),void 0!==d&&d>=0&&f<d&&(f=d),f}function M(a,b){return a<b?a:b}function N(a,b){return a>b?a:b}function O(a,b,c){return N(L(a,b,c),r(a,b))}function P(a,b,c){var d=b.layout[Ba[c]];b.layout[ya[c]]=a.layout[Ba[c]]-d-b.layout[za[c]]}function Q(a,b){return void 0!==a.style[xa[b]]?J(a,b):-K(a,b)}function R(a,b){var c=v(x(a),b),d=y(c,b);a.layout[xa[c]]=i(a,c)+Q(a,c),a.layout[ya[c]]=j(a,c)+Q(a,c),a.layout[xa[d]]=i(a,d)+Q(a,d),a.layout[ya[d]]=j(a,d)+Q(a,d)}function S(a,b){if(!a)throw new Error(b)}function T(a,d,e,k,l,Q,T){S(!b(d)||l===ua,"availableWidth is indefinite so widthMeasureMode must be CSS_MEASURE_MODE_UNDEFINED"),S(!b(e)||Q===ua,"availableHeight is indefinite so heightMeasureMode must be CSS_MEASURE_MODE_UNDEFINED");var U=r(a,da),W=r(a,fa),Y=q(a,da),Z=q(a,fa),$=w(a,k);if(a.layout.direction=$,I(a)){var _=d-Y-U,aa=e-Z-W;if(l===va&&Q===va)a.layout.measuredWidth=O(a,da,d-Y),a.layout.measuredHeight=O(a,fa,e-Z);else if(_<=0||aa<=0)a.layout.measuredWidth=O(a,da,0),a.layout.measuredHeight=O(a,fa,0);else{var ba=a.style.measure(_,l,aa,Q);a.layout.measuredWidth=O(a,da,l===ua||l===wa?ba.width+U:d-Y),a.layout.measuredHeight=O(a,fa,Q===ua||Q===wa?ba.height+W:e-Z)}}else{var ca=a.children.length;if(0===ca)return a.layout.measuredWidth=O(a,da,l===ua||l===wa?U:d-Y),void(a.layout.measuredHeight=O(a,fa,Q===ua||Q===wa?W:e-Z));if(!T){if(l===wa&&d<=0&&Q===wa&&e<=0)return a.layout.measuredWidth=O(a,da,0),void(a.layout.measuredHeight=O(a,fa,0));if(l===wa&&d<=0)return a.layout.measuredWidth=O(a,da,0),void(a.layout.measuredHeight=O(a,fa,b(e)?0:e-Z));if(Q===wa&&e<=0)return a.layout.measuredWidth=O(a,da,b(d)?0:d-Y),void(a.layout.measuredHeight=O(a,fa,0));if(l===va&&Q===va)return a.layout.measuredWidth=O(a,da,d-Y),void(a.layout.measuredHeight=O(a,fa,e-Z))}var sa,ya,Aa,Ca,Da,Ea,Fa=v(x(a),$),Ga=y(Fa,$),Ha=c(Fa),Ia=s(a),Ja=C(a),Ka=void 0,La=void 0,Ma=o(a,Fa),Na=p(a,Fa),Oa=o(a,Ga),Pa=r(a,Fa),Qa=r(a,Ga),Ra=Ha?l:Q,Sa=Ha?Q:l,Ta=d-Y-U,Ua=e-Z-W,Va=Ha?Ta:Ua,Wa=Ha?Ua:Ta;for(ya=0;ya<ca;ya++){if(sa=a.children[ya],T){var Xa=w(sa,$);R(sa,Xa)}z(sa)===ra?(void 0===Ka&&(Ka=sa),void 0!==La&&(La.nextChild=sa),La=sa,sa.nextChild=void 0):Ha&&E(sa,da)?sa.layout.flexBasis=N(sa.style.width,r(sa,da)):!Ha&&E(sa,fa)?sa.layout.flexBasis=N(sa.style.height,r(sa,fa)):f(sa)||b(Va)?(Aa=X,Ca=X,Da=ua,Ea=ua,Ha?l==ua||b(Va)?(Aa=X,Da=ua):(Aa=Va,Da=wa):A(a)===ta&&(Q==ua||b(Va)?(Ca=X,Ea=ua):(Ca=Va,Ea=wa)),Ha?A(a)===ta&&(b(Wa)||E(sa,fa)||Q!=va||u(a,sa)!=pa?E(sa,fa)?(Ca=sa.style.height+q(sa,fa),Ea=va):(Ca=Wa,Ea=b(Ca)?ua:wa):(Ca=Wa,Ea=va)):b(Wa)||E(sa,da)||l!=va||u(a,sa)!=pa?E(sa,da)?(Aa=sa.style.width+q(sa,da),Da=va):(Aa=Wa,Da=b(Aa)?ua:wa):(Aa=Wa,Da=va),V(sa,Aa,Ca,$,Da,Ea,!1,"measure"),sa.layout.flexBasis=N(Ha?sa.layout.measuredWidth:sa.layout.measuredHeight,r(sa,Fa))):sa.layout.flexBasis=N(0,r(sa,Fa))}for(var Ya=0,Za=0,$a=0,_a=0,ab=0;Za<ca;){var bb=0,cb=0,db=0,eb=0;ya=Ya;for(var fb=void 0,gb=void 0;ya<ca;){if(sa=a.children[ya],sa.lineIndex=$a,z(sa)!==ra){var hb=sa.layout.flexBasis+q(sa,Fa);if(cb+hb>Va&&Ja&&bb>0)break;cb+=hb,bb++,B(sa)&&(db+=g(sa),eb+=h(sa)*sa.layout.flexBasis),void 0===fb&&(fb=sa),void 0!==gb&&(gb.nextChild=sa),gb=sa,sa.nextChild=void 0}ya++,Za++}var ib=!T&&Sa===va,jb=0,kb=0,lb=0;b(Va)?cb<0&&(lb=-cb):lb=Va-cb;var mb=lb,nb=0;if(!ib){var ob,pb,qb,rb,sb,tb=0,ub=0;for(gb=fb;void 0!==gb;)ob=gb.layout.flexBasis,lb<0?(pb=h(gb)*ob,0!==pb&&(rb=ob+lb/eb*pb,sb=O(gb,Fa,rb),rb!==sb&&(nb-=sb-ob,tb-=pb))):lb>0&&(qb=g(gb),0!==qb&&(rb=ob+lb/db*qb,sb=O(gb,Fa,rb),rb!==sb&&(nb-=sb-ob,ub-=qb))),gb=gb.nextChild;for(eb+=tb,db+=ub,lb+=nb,nb=0,gb=fb;void 0!==gb;){ob=gb.layout.flexBasis;var vb=ob;lb<0?(pb=h(gb)*ob,0!==pb&&(vb=O(gb,Fa,ob+lb/eb*pb))):lb>0&&(qb=g(gb),0!==qb&&(vb=O(gb,Fa,ob+lb/db*qb))),nb-=vb-ob,Ha?(Aa=vb+q(gb,da),Da=va,b(Wa)||E(gb,fa)||Q!=va||u(a,gb)!=pa?E(gb,fa)?(Ca=gb.style.height+q(gb,fa),Ea=va):(Ca=Wa,Ea=b(Ca)?ua:wa):(Ca=Wa,Ea=va)):(Ca=vb+q(gb,fa),Ea=va,b(Wa)||E(gb,da)||l!=va||u(a,gb)!=pa?E(gb,da)?(Aa=gb.style.width+q(gb,da),Da=va):(Aa=Wa,Da=b(Aa)?ua:wa):(Aa=Wa,Da=va));var wb=!E(gb,Ga)&&u(a,gb)===pa;V(gb,Aa,Ca,$,Da,Ea,T&&!wb,"flex"),gb=gb.nextChild}}lb=mb+nb,Ra===wa&&(lb=0),Ia!==ha&&(Ia===ia?jb=lb/2:Ia===ja?jb=lb:Ia===ka?(lb=N(lb,0),kb=bb>1?lb/(bb-1):0):Ia===la&&(kb=lb/bb,jb=kb/2));var xb=Ma+jb,yb=0;for(ya=Ya;ya<Za;++ya)sa=a.children[ya],z(sa)===ra&&G(sa,Fa)?T&&(sa.layout[za[Fa]]=J(sa,Fa)+m(a,Fa)+i(sa,Fa)):(T&&(sa.layout[za[Fa]]+=xb),z(sa)===qa&&(ib?(xb+=kb+q(sa,Fa)+sa.layout.flexBasis,yb=Wa):(xb+=kb+D(sa,Fa),yb=N(yb,D(sa,Ga)))));xb+=Na;var zb=Wa;if(Sa!==ua&&Sa!==wa||(zb=O(a,Ga,yb+Qa)-Qa,Sa===wa&&(zb=M(zb,Wa))),Ja||Sa!==va||(yb=Wa),yb=O(a,Ga,yb+Qa)-Qa,T)for(ya=Ya;ya<Za;++ya)if(sa=a.children[ya],z(sa)===ra)G(sa,Ga)?sa.layout[za[Ga]]=J(sa,Ga)+m(a,Ga)+i(sa,Ga):sa.layout[za[Ga]]=Oa+i(sa,Ga);else{var Ab=Oa,Bb=u(a,sa);if(Bb===pa){Aa=sa.layout.measuredWidth+q(sa,da),Ca=sa.layout.measuredHeight+q(sa,fa);var Cb=!1;Ha?(Cb=E(sa,fa),Ca=yb):(Cb=E(sa,da),Aa=yb),Cb||(Da=b(Aa)?ua:va,Ea=b(Ca)?ua:va,V(sa,Aa,Ca,$,Da,Ea,!0,"stretch"))}else if(Bb!==ma){var Db=zb-D(sa,Ga);Ab+=Bb===na?Db/2:Db}sa.layout[za[Ga]]+=_a+Ab}_a+=yb,ab=N(ab,xb),$a++,Ya=Za,Za=Ya}if($a>1&&T&&!b(Wa)){var Eb=Wa-_a,Fb=0,Gb=Oa,Hb=t(a);Hb===oa?Gb+=Eb:Hb===na?Gb+=Eb/2:Hb===pa&&Wa>_a&&(Fb=Eb/$a);var Ib=0;for(ya=0;ya<$a;++ya){var Jb,Kb=Ib,Lb=0;for(Jb=Kb;Jb<ca;++Jb)if(sa=a.children[Jb],z(sa)===qa){if(sa.lineIndex!==ya)break;F(sa,Ga)&&(Lb=N(Lb,sa.layout[Ba[Ga]]+q(sa,Ga)))}if(Ib=Jb,Lb+=Fb,T)for(Jb=Kb;Jb<Ib;++Jb)if(sa=a.children[Jb],z(sa)===qa){var Mb=u(a,sa);Mb===ma?sa.layout[za[Ga]]=Gb+i(sa,Ga):Mb===oa?sa.layout[za[Ga]]=Gb+Lb-j(sa,Ga)-sa.layout[Ba[Ga]]:Mb===na?(Ca=sa.layout[Ba[Ga]],sa.layout[za[Ga]]=Gb+(Lb-Ca)/2):Mb===pa&&(sa.layout[za[Ga]]=Gb+i(sa,Ga))}Gb+=Lb}}for(a.layout.measuredWidth=O(a,da,d-Y),a.layout.measuredHeight=O(a,fa,e-Z),Ra===ua?a.layout[Ba[Fa]]=O(a,Fa,ab):Ra===wa&&(a.layout[Ba[Fa]]=N(M(Va+Pa,L(a,Fa,ab)),Pa)),Sa===ua?a.layout[Ba[Ga]]=O(a,Ga,_a+Qa):Sa===wa&&(a.layout[Ba[Ga]]=N(M(Wa+Qa,L(a,Ga,_a+Qa)),Qa)),La=Ka;void 0!==La;)T&&(Aa=X,Ca=X,E(La,da)?Aa=La.style.width+q(La,da):G(La,da)&&H(La,da)&&(Aa=a.layout.measuredWidth-(m(a,da)+n(a,da))-(J(La,da)+K(La,da)),Aa=O(La,da,Aa)),E(La,fa)?Ca=La.style.height+q(La,fa):G(La,fa)&&H(La,fa)&&(Ca=a.layout.measuredHeight-(m(a,fa)+n(a,fa))-(J(La,fa)+K(La,fa)),Ca=O(La,fa,Ca)),(b(Aa)||b(Ca))&&(Da=b(Aa)?ua:va,Ea=b(Ca)?ua:va,Ha||!b(Aa)||b(Ta)||(Aa=Ta,Da=wa),A(a)===ta&&Ha&&b(Ca)&&!b(Ua)&&(Ca=Ua,Ea=wa),V(La,Aa,Ca,$,Da,Ea,!1,"abs-measure"),Aa=La.layout.measuredWidth+q(La,da),Ca=La.layout.measuredHeight+q(La,fa)),V(La,Aa,Ca,$,va,va,!0,"abs-layout"),H(La,Fa)&&!G(La,Fa)&&(La.layout[xa[Fa]]=a.layout[Ba[Fa]]-La.layout[Ba[Fa]]-K(La,Fa)),H(La,Ga)&&!G(La,Ga)&&(La.layout[xa[Ga]]=a.layout[Ba[Ga]]-La.layout[Ba[Ga]]-K(La,Ga))),La=La.nextChild;if(T){var Nb=!1,Ob=!1;if(Fa!==ea&&Fa!==ga||(Nb=!0),Ga!==ea&&Ga!==ga||(Ob=!0),Nb||Ob)for(ya=0;ya<ca;++ya)sa=a.children[ya],Nb&&P(a,sa,Fa),Ob&&P(a,sa,Ga)}}}function U(a,b,c,d,e,f,g,h){var i=h.heightMeasureMode==ua&&g==ua||h.heightMeasureMode==g&&h.availableHeight==c,j=h.widthMeasureMode==ua&&f==ua||h.widthMeasureMode==f&&h.availableWidth==b;if(i&&j)return!0;var k=h.heightMeasureMode==ua&&g==wa&&h.computedHeight<=c-e||g==va&&h.computedHeight==c-e;if(j&&k)return!0;var l=h.widthMeasureMode==ua&&f==wa&&h.computedWidth<=b-d||f==va&&h.computedWidth==b-d;if(i&&l)return!0;if(k&&l)return!0;if(a){if(j)return g==ua||(g==wa&&h.computedHeight<c-e||(h.computedHeight=c-e,!0));if(h.widthMeasureMode==ua&&(f==ua||f==wa&&h.computedWidth<=b-d))return!0}return!1}function V(a,b,c,d,e,f,g,h){var i=a.layout,j=a.isDirty&&i.generationCount!==Z||i.lastParentDirection!==d;j&&(void 0!==i.cachedMeasurements&&(i.cachedMeasurements=[]),void 0!==i.cachedLayout&&(i.cachedLayout.widthMeasureMode=void 0,i.cachedLayout.heightMeasureMode=void 0));var k,l,m;if(I(a)){var n=q(a,da),o=q(a,fa);if(i.cachedLayout&&U(a.isTextNode,b,c,n,o,e,f,i.cachedLayout))m=i.cachedLayout;else if(i.cachedMeasurements)for(k=0,l=i.cachedMeasurements.length;k<l;k++)if(U(a.isTextNode,b,c,n,o,e,f,i.cachedMeasurements[k])){m=i.cachedMeasurements[k];break}}else if(g)i.cachedLayout&&i.cachedLayout.availableWidth===b&&i.cachedLayout.availableHeight===c&&i.cachedLayout.widthMeasureMode===e&&i.cachedLayout.heightMeasureMode===f&&(m=i.cachedLayout);else if(i.cachedMeasurements)for(k=0,l=i.cachedMeasurements.length;k<l;k++)if(i.cachedMeasurements[k].availableWidth===b&&i.cachedMeasurements[k].availableHeight===c&&i.cachedMeasurements[k].widthMeasureMode===e&&i.cachedMeasurements[k].heightMeasureMode===f){m=i.cachedMeasurements[k];break}if(j||void 0===m){if(T(a,b,c,d,e,f,g),i.lastParentDirection=d,void 0===m){var p;g?(void 0===i.cachedLayout&&(i.cachedLayout={}),p=i.cachedLayout):(void 0===i.cachedMeasurements&&(i.cachedMeasurements=[]),p={},i.cachedMeasurements.push(p)),p.availableWidth=b,p.availableHeight=c,p.widthMeasureMode=e,p.heightMeasureMode=f,p.computedWidth=i.measuredWidth,p.computedHeight=i.measuredHeight}}else i.measureWidth=m.computedWidth,i.measureHeight=m.computedHeight;return g&&(a.layout.width=a.layout.measuredWidth,a.layout.height=a.layout.measuredHeight,i.shouldUpdate=!0),i.generationCount=Z,j||void 0===m}function W(a,c,d,e){Z++;var f=ua,g=ua;b(c)?E(a,da)?(c=a.style.width+q(a,da),f=va):a.style.maxWidth>=0&&(c=a.style.maxWidth,f=wa):f=va,b(d)?E(a,fa)?(d=a.style.height+q(a,fa),g=va):a.style.maxHeight>=0&&(d=a.style.maxHeight,g=wa):g=va,V(a,c,d,e,f,g,!0,"initial")&&R(a,a.layout.direction)}var X,Y=!1,Z=0,$="start",_="end",aa="inherit",ba="ltr",ca="rtl",da="row",ea="row-reverse",fa="column",ga="column-reverse",ha="flex-start",ia="center",ja="flex-end",ka="space-between",la="space-around",ma="flex-start",na="center",oa="flex-end",pa="stretch",qa="relative",ra="absolute",sa="visible",ta="hidden",ua="undefined",va="exactly",wa="at-most",xa={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},ya={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},za={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},Aa={row:"width","row-reverse":"width",column:"height","column-reverse":"height"},Ba={row:"measuredWidth","row-reverse":"measuredWidth",column:"measuredHeight","column-reverse":"measuredHeight"};return{layoutNodeImpl:T,computeLayout:W,fillNodes:a,canUseCachedMeasurement:U}}();return"object"==typeof exports&&(module.exports=a),function(b){a.fillNodes(b),a.computeLayout(b)}});
//# sourceMappingURL=css-layout.min.js.map